State machine states

Initial_State:

Initialiseer de systeemvariabelen en hardware-instellingen.
Ga naar State: Door1_Unlocked


Door1_Unlocked:

Wacht op de handmatige ontgrendeling van Deur 1 (Switch 1 low).
Toon deurenstatus op OLED: "Deur 1: Ontgrendeld", "Deur 2: Vergrendeld".
Als Deur 1 handmatig wordt ontgrendeld, ga naar State: Door1_Open_With_Person.
Anders blijf in deze staat.


Door1_Open_With_Person:

Wacht tot persoon wordt gedetecteerd in gebied A (Switch 3 high).
Als er een persoon wordt gedetecteerd, wacht dan op het handmatig sluiten van Deur 1 (Switch 1 high).
Als Deur 1 wordt gesloten, ga naar State: Ferrometal_Detection.
Als er geen persoon wordt gedetecteerd en Deur 1 wordt gesloten, ga terug naar State: Door1_Unlocked.


Ferrometal_Detection:

Meet de aanwezigheid van ferrometaal (Potentiometerwaarde).
Pas de kleur van de LED Scanner aan op basis van de potentiometerwaarde.
Controleer of er alleen mensen bevinden in gebied B (Switch 3 low en Switch 4 high).
Als er geen metaaldetectie is bij passage van gebied A naar B, vergrendel Deur 1 en ontgrendel Deur 2.
Ga naar State: Door2_Open_With_Person.


Door2_Open_With_Person:

Wacht tot Deur 2 wordt geopend (Switch 2 low).
Als Deur 2 wordt geopend, wacht dan tot Deur 2 weer wordt gesloten (Switch 2 high).
Als Deur 2 wordt gesloten, vergrendel Deur 2 (Switch 2 high).
Controleer of er mensen zijn in gebied A of B (Switch 3 high en Switch 4 high).
Als er mensen zijn, vergrendel Deur 1 en ontgrendel Deur 2.
Ga terug naar State: Door1_Unlocked.